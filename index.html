<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unisex Bathroom Search</title>
</head>
<body>
  <h1>Unisex Bathroom Search</h1>
  <label for="buildingInput">Enter Building Name:</label>
  <input type="text" id="buildingInput">
  <table id="result"></table>

  <script src="./data/data.js"></script>
  <script>

    const input = document.querySelector("input");

    input.addEventListener("input", (e) => {
        search();
    });

    function search() {
        let buildingInput = document.getElementById('buildingInput').value;

        buildingInput = buildingInput.replaceAll(" ", "").toLowerCase();

        searchedBuildings = []
        data.forEach(building => {
            if (building.name.toLowerCase().includes(buildingInput)) {
                searchedBuildings.push(building);
            }
        });

        // idk this makes it work and i'm too lazy to optimize :þ
        // besides, look!  ↓↓  a heart :3
        for (let i = -1; i <3; i++) {
          makeTable(searchedBuildings);
        }
    
    }
    
    function makeTable(arr) {
      let table = document.getElementById("result");
        // adds to the table
        arr.forEach(building => {
          isInTable = false;
          for (let row of table.rows) {
            if (row.cells[0].textContent === building.name) {
              isInTable = true;
            }
          }
          if (!isInTable) {
            let row = table.insertRow();
            let nameCell = row.insertCell(0);
            let roomsCell = row.insertCell(1);
            nameCell.innerHTML = building.name;
            roomsCell.innerHTML = building.rooms;
          }
        });

        //removes from the table
        for(let row of table.rows) {
          isInJSON = false;
          arr.forEach(building => {
            if(row.cells[0].textContent === building.name) {
              isInJSON = true;
            }
          });
          if (!isInJSON) {
            row.parentNode.removeChild(row);
          }
        }
    }


  
  </script>
</body>
</html>
